<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<link rel="stylesheet" href="/_assets/main.css" />
<link rel="stylesheet" href="/_assets/background/tech.css" />
<script src="/_assets/background/tech.js"></script>
    <title>APT å’Œ DPKG å¸¸ç”¨æ“ä½œå‘½ä»¤ - YIMI&#39;s Blog</title>
    <link rel="stylesheet" href="/_assets/viewerjs/viewer.min.css">
    <meta name="keywords" content="å‘½ä»¤,å·¥å…·">
  <link rel="stylesheet" href="/_markdown_plugin_assets/highlight.js/atom-one-light.css" /></head>
  <body>
    <header class="header">
      <div class="header-content">
        <div>
          <a href="/" class="header-title">YIMI&#39;s Blog</a>
          <div class="header-subtitle">ç¬”è®°æ˜¯ä¸€ç§å¿ƒæ€ï¼</div>
        </div>
        <nav class="header-nav">
          
          <a href="/archives">ç¬”è®°åº“</a>
          
          <a href="/index">é¦–é¡µ</a>
          
          <a href="/about">å…³äº</a>
          
        </nav>
      </div>
    </header>
    <div class="main">
      <article>
        <header>
          <h1 class="article-title">APT å’Œ DPKG å¸¸ç”¨æ“ä½œå‘½ä»¤</h1>
          <div class="article-info">
            <div>
              <span
                >Created Atï¼š<time datetime="1748343802543"
                  >2025-05-27 19:03</time
                ></span
              >
              <span
                >Updated Atï¼š<time datetime="1748343970366"
                  >2025-05-27 19:06</time
                ></span
              >
            </div>
            
            <div>
              Keywords: 
              
              <span class="keyword">å‘½ä»¤</span>
              
              <span class="keyword">å·¥å…·</span>
              
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><h1 id="apt-å’Œ-dpkg-å¸¸ç”¨æ“ä½œå‘½ä»¤æ‰‹å†Œ"><strong>APT å’Œ DPKG å¸¸ç”¨æ“ä½œå‘½ä»¤æ‰‹å†Œ</strong></h1>
<p>APTï¼ˆAdvanced Package Toolï¼‰å’Œ DPKGï¼ˆDebian Packageï¼‰æ˜¯ Debian/Ubuntu ç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„åŒ…ç®¡ç†å·¥å…·ã€‚</p>
<ul>
<li><strong>APT</strong>ï¼šé«˜çº§å·¥å…·ï¼Œç”¨äºåœ¨çº¿å®‰è£…ã€å‡çº§ã€ç®¡ç†ä¾èµ–ã€‚</li>
<li><strong>DPKG</strong>ï¼šåº•å±‚å·¥å…·ï¼Œç›´æ¥æ“ä½œ <code>.deb</code> åŒ…ï¼Œä¸å¤„ç†ä¾èµ–å…³ç³»ã€‚</li>
</ul>
<hr />
<h2 id="1-apt-å¸¸ç”¨å‘½ä»¤"><strong>1. APT å¸¸ç”¨å‘½ä»¤</strong></h2>
<h3 id="11-æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨"><strong>1.1 æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨</strong></h3>
<div><pre class="hljs"><code>sudo apt update            <span class="hljs-comment"># æ›´æ–°å¯ç”¨è½¯ä»¶åŒ…åˆ—è¡¨ï¼ˆä¸å‡çº§è½¯ä»¶ï¼‰</span></code></pre></div>
<h3 id="12-å‡çº§è½¯ä»¶åŒ…"><strong>1.2 å‡çº§è½¯ä»¶åŒ…</strong></h3>
<div><pre class="hljs"><code>sudo apt upgrade           <span class="hljs-comment"># å‡çº§æ‰€æœ‰å¯å‡çº§çš„è½¯ä»¶åŒ…ï¼ˆä¸åˆ é™¤æ—§åŒ…ï¼‰</span>
sudo apt full-upgrade      <span class="hljs-comment"># å‡çº§å¹¶å¤„ç†ä¾èµ–å†²çªï¼ˆå¯èƒ½åˆ é™¤æ—§åŒ…ï¼‰</span>
sudo apt dist-upgrade      <span class="hljs-comment"># åŒ full-upgradeï¼ˆUbuntu/Debian æ¨èï¼‰</span></code></pre></div>
<h3 id="13-å®‰è£…è½¯ä»¶"><strong>1.3 å®‰è£…è½¯ä»¶</strong></h3>
<div><pre class="hljs"><code>sudo apt install &lt;package&gt;          <span class="hljs-comment"># å®‰è£…æŒ‡å®šè½¯ä»¶åŒ…</span>
sudo apt install &lt;package&gt;=&lt;version&gt; <span class="hljs-comment"># å®‰è£…ç‰¹å®šç‰ˆæœ¬</span>
sudo apt install &lt;package1&gt; &lt;package2&gt; <span class="hljs-comment"># å®‰è£…å¤šä¸ªè½¯ä»¶</span></code></pre></div>
<h3 id="14-å¸è½½è½¯ä»¶"><strong>1.4 å¸è½½è½¯ä»¶</strong></h3>
<div><pre class="hljs"><code>sudo apt remove &lt;package&gt;           <span class="hljs-comment"># å¸è½½è½¯ä»¶ä½†ä¿ç•™é…ç½®æ–‡ä»¶</span>
sudo apt purge &lt;package&gt;            <span class="hljs-comment"># å¸è½½å¹¶åˆ é™¤é…ç½®æ–‡ä»¶ï¼ˆå½»åº•æ¸…ç†ï¼‰</span>
sudo apt remove --purge &lt;package&gt;    <span class="hljs-comment"># åŒä¸Šï¼ˆpurge çš„å¦ä¸€ç§å†™æ³•ï¼‰</span></code></pre></div>
<h3 id="15-æ¸…ç†æ— ç”¨åŒ…"><strong>1.5 æ¸…ç†æ— ç”¨åŒ…</strong></h3>
<div><pre class="hljs"><code>sudo apt autoremove          <span class="hljs-comment"># åˆ é™¤ä¸å†éœ€è¦çš„ä¾èµ–åŒ…ï¼ˆä¿ç•™é…ç½®ï¼‰</span>
sudo apt autoremove --purge  <span class="hljs-comment"># åˆ é™¤ä¾èµ–åŒ…åŠå…¶é…ç½®æ–‡ä»¶</span>
sudo apt clean               <span class="hljs-comment"># åˆ é™¤æ‰€æœ‰å·²ä¸‹è½½çš„ .deb åŒ…ï¼ˆ/var/cache/apt/archivesï¼‰</span>
sudo apt autoclean           <span class="hljs-comment"># ä»…åˆ é™¤æ—§ç‰ˆæœ¬çš„ .deb åŒ…</span></code></pre></div>
<h3 id="16-æœç´¢è½¯ä»¶"><strong>1.6 æœç´¢è½¯ä»¶</strong></h3>
<div><pre class="hljs"><code>apt search &lt;keyword&gt;         <span class="hljs-comment"># æœç´¢è½¯ä»¶åŒ…ï¼ˆæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼‰</span>
apt show &lt;package&gt;           <span class="hljs-comment"># æŸ¥çœ‹è½¯ä»¶åŒ…è¯¦ç»†ä¿¡æ¯</span>
apt list --installed         <span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…</span>
apt list --upgradable        <span class="hljs-comment"># åˆ—å‡ºå¯å‡çº§çš„è½¯ä»¶åŒ…</span></code></pre></div>
<h3 id="17-ä¿®å¤ä¾èµ–é—®é¢˜"><strong>1.7 ä¿®å¤ä¾èµ–é—®é¢˜</strong></h3>
<div><pre class="hljs"><code>sudo apt --fix-broken install  <span class="hljs-comment"># ä¿®å¤ä¾èµ–é—®é¢˜</span>
sudo apt install -f           <span class="hljs-comment"># åŒä¸Š</span></code></pre></div>
<hr />
<h2 id="2-dpkg-å¸¸ç”¨å‘½ä»¤"><strong>2. DPKG å¸¸ç”¨å‘½ä»¤</strong></h2>
<h3 id="21-å®‰è£…-deb-åŒ…"><strong>2.1 å®‰è£… .deb åŒ…</strong></h3>
<div><pre class="hljs"><code>sudo dpkg -i &lt;package.deb&gt;    <span class="hljs-comment"># å®‰è£…æœ¬åœ° .deb åŒ…ï¼ˆä¸å¤„ç†ä¾èµ–ï¼‰</span>
sudo apt install -f           <span class="hljs-comment"># å¦‚æœä¾èµ–ç¼ºå¤±ï¼Œç”¨æ­¤å‘½ä»¤ä¿®å¤</span></code></pre></div>
<h3 id="22-å¸è½½è½¯ä»¶"><strong>2.2 å¸è½½è½¯ä»¶</strong></h3>
<div><pre class="hljs"><code>sudo dpkg -r &lt;package&gt;        <span class="hljs-comment"># å¸è½½è½¯ä»¶ï¼ˆä¿ç•™é…ç½®æ–‡ä»¶ï¼‰</span>
sudo dpkg -P &lt;package&gt;        <span class="hljs-comment"># å½»åº•å¸è½½ï¼ˆåˆ é™¤è½¯ä»¶å’Œé…ç½®ï¼‰</span></code></pre></div>
<h3 id="23-æŸ¥è¯¢è½¯ä»¶åŒ…"><strong>2.3 æŸ¥è¯¢è½¯ä»¶åŒ…</strong></h3>
<div><pre class="hljs"><code>dpkg -l                       <span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…</span>
dpkg -l | grep &lt;keyword&gt;      <span class="hljs-comment"># æœç´¢å·²å®‰è£…çš„åŒ…</span>
dpkg -s &lt;package&gt;             <span class="hljs-comment"># æŸ¥çœ‹è½¯ä»¶åŒ…çŠ¶æ€</span>
dpkg -L &lt;package&gt;             <span class="hljs-comment"># åˆ—å‡ºè½¯ä»¶åŒ…å®‰è£…çš„æ–‡ä»¶</span>
dpkg -S &lt;file&gt;                <span class="hljs-comment"># æŸ¥æ‰¾æŸä¸ªæ–‡ä»¶å±äºå“ªä¸ªåŒ…</span></code></pre></div>
<h3 id="24-è§£å‹-deb-åŒ…ä¸å®‰è£…"><strong>2.4 è§£å‹ .deb åŒ…ï¼ˆä¸å®‰è£…ï¼‰</strong></h3>
<div><pre class="hljs"><code>dpkg -x &lt;package.deb&gt; &lt;dir&gt;   <span class="hljs-comment"># è§£å‹ .deb åŒ…åˆ°æŒ‡å®šç›®å½•</span>
dpkg -e &lt;package.deb&gt; &lt;dir&gt;   <span class="hljs-comment"># æå– .deb çš„æ§åˆ¶ä¿¡æ¯ï¼ˆDEBIAN/ ç›®å½•ï¼‰</span></code></pre></div>
<h3 id="25-ä¿®å¤æŸåçš„åŒ…"><strong>2.5 ä¿®å¤æŸåçš„åŒ…</strong></h3>
<div><pre class="hljs"><code>sudo dpkg --configure -a      <span class="hljs-comment"># å°è¯•ä¿®å¤æœªå®Œæˆçš„å®‰è£…</span></code></pre></div>
<hr />
<h2 id="3-apt-å’Œ-dpkg-ç»“åˆä½¿ç”¨"><strong>3. APT å’Œ DPKG ç»“åˆä½¿ç”¨</strong></h2>
<h3 id="31-ä¸‹è½½-deb-åŒ…ä½†ä¸å®‰è£…"><strong>3.1 ä¸‹è½½ .deb åŒ…ä½†ä¸å®‰è£…</strong></h3>
<div><pre class="hljs"><code>apt download &lt;package&gt;        <span class="hljs-comment"># ä¸‹è½½ .deb åŒ…åˆ°å½“å‰ç›®å½•</span></code></pre></div>
<h3 id="32-æŸ¥çœ‹è½¯ä»¶åŒ…çš„ä¾èµ–"><strong>3.2 æŸ¥çœ‹è½¯ä»¶åŒ…çš„ä¾èµ–</strong></h3>
<div><pre class="hljs"><code>apt depends &lt;package&gt;         <span class="hljs-comment"># æŸ¥çœ‹ä¾èµ–å“ªäº›åŒ…</span>
apt rdepends &lt;package&gt;        <span class="hljs-comment"># æŸ¥çœ‹å“ªäº›åŒ…ä¾èµ–å®ƒ</span></code></pre></div>
<h3 id="33-é‡æ–°é…ç½®å·²å®‰è£…çš„åŒ…"><strong>3.3 é‡æ–°é…ç½®å·²å®‰è£…çš„åŒ…</strong></h3>
<div><pre class="hljs"><code>sudo dpkg-reconfigure &lt;package&gt;  <span class="hljs-comment"># é‡æ–°è¿è¡Œè½¯ä»¶åŒ…çš„é…ç½®ï¼ˆå¦‚ tzdataï¼‰</span></code></pre></div>
<hr />
<h2 id="4-é«˜çº§ç”¨æ³•"><strong>4. é«˜çº§ç”¨æ³•</strong></h2>
<h3 id="41-é”å®šè½¯ä»¶åŒ…ç‰ˆæœ¬é˜²æ­¢è‡ªåŠ¨å‡çº§"><strong>4.1 é”å®šè½¯ä»¶åŒ…ç‰ˆæœ¬ï¼ˆé˜²æ­¢è‡ªåŠ¨å‡çº§ï¼‰</strong></h3>
<div><pre class="hljs"><code>sudo apt-mark hold &lt;package&gt;    <span class="hljs-comment"># é”å®šç‰ˆæœ¬</span>
sudo apt-mark unhold &lt;package&gt;  <span class="hljs-comment"># è§£é™¤é”å®š</span>
sudo apt-mark showhold          <span class="hljs-comment"># æŸ¥çœ‹é”å®šçš„åŒ…</span></code></pre></div>
<h3 id="42-æŸ¥çœ‹è½¯ä»¶åŒ…æ—¥å¿—"><strong>4.2 æŸ¥çœ‹è½¯ä»¶åŒ…æ—¥å¿—</strong></h3>
<div><pre class="hljs"><code>cat /var/<span class="hljs-built_in">log</span>/apt/history.log    <span class="hljs-comment"># æŸ¥çœ‹ APT æ“ä½œå†å²</span>
cat /var/<span class="hljs-built_in">log</span>/dpkg.log           <span class="hljs-comment"># æŸ¥çœ‹ DPKG æ“ä½œå†å²</span></code></pre></div>
<h3 id="43-å¼ºåˆ¶é™çº§è½¯ä»¶åŒ…"><strong>4.3 å¼ºåˆ¶é™çº§è½¯ä»¶åŒ…</strong></h3>
<div><pre class="hljs"><code>sudo apt install &lt;package&gt;=&lt;version&gt;  <span class="hljs-comment"># æŒ‡å®šç‰ˆæœ¬å®‰è£…</span></code></pre></div>
<h3 id="44-é¢å¤–æ¸…ç†æ®‹ç•™é…ç½®"><strong>4.4 é¢å¤–æ¸…ç†æ®‹ç•™é…ç½®</strong></h3>
<p>å³ä½¿ä½¿ç”¨ --purgeï¼ŒæŸäº›æ®‹ç•™çš„é…ç½®æ–‡ä»¶å¯èƒ½ä»ä¼šç•™åœ¨ç³»ç»Ÿä¸­ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¸…ç†ï¼š</p>
<div><pre class="hljs"><code>dpkg -l | grep <span class="hljs-string">'^rc'</span> | awk <span class="hljs-string">'{print $2}'</span> | sudo xargs dpkg --purge</code></pre></div>
<hr />
<h2 id="5-æ€»ç»“"><strong>5. æ€»ç»“</strong></h2>
<table>
<thead>
<tr>
<th><strong>åŠŸèƒ½</strong></th>
<th><strong>APT å‘½ä»¤</strong></th>
<th><strong>DPKG å‘½ä»¤</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>å®‰è£…</strong></td>
<td><code>apt install</code></td>
<td><code>dpkg -i</code></td>
</tr>
<tr>
<td><strong>å¸è½½</strong></td>
<td><code>apt remove/purge</code></td>
<td><code>dpkg -r/-P</code></td>
</tr>
<tr>
<td><strong>æŸ¥è¯¢</strong></td>
<td><code>apt list/show</code></td>
<td><code>dpkg -l/-s</code></td>
</tr>
<tr>
<td><strong>ä¿®å¤</strong></td>
<td><code>apt -f install</code></td>
<td><code>dpkg --configure -a</code></td>
</tr>
<tr>
<td><strong>æ¸…ç†</strong></td>
<td><code>apt autoremove</code></td>
<td><code>dpkg -P</code></td>
</tr>
</tbody>
</table>
<p><strong>æ¨èä½¿ç”¨ APT</strong>ï¼ˆè‡ªåŠ¨å¤„ç†ä¾èµ–ï¼‰ï¼Œ<strong>DPKG ä»…ç”¨äºç›´æ¥æ“ä½œ .deb åŒ…</strong>ã€‚</p>
<p>å¸Œæœ›è¿™ä»½æ‰‹å†Œèƒ½å¸®åŠ©ä½ é«˜æ•ˆç®¡ç† Debian/Ubuntu è½¯ä»¶åŒ…ï¼ ğŸš€</p>
</div>
      </article>
    </div>
    <script src="/_assets/viewerjs/viewer.min.js"></script>
    <script src="/_assets/clipboardjs/clipboard.min.js"></script>
    <style>
      .code-block {
        position: relative;
      }
      .code-copy {
        position: absolute;
        right: 10px;
        top: 10px;
        padding: 2px 8px;
        background: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 3px;
        cursor: pointer;
        font-size: 12px;
        opacity: 0;
        transition: opacity 0.3s;
      }
      .code-block:hover .code-copy {
        opacity: 1;
      }
      .toast {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 12px 24px;
        border-radius: 4px;
        z-index: 9999;
        opacity: 0;
        transition: opacity 0.3s;
      }
      .toast.show {
        opacity: 1;
      }
    </style>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // åˆå§‹åŒ–ä»£ç å¤åˆ¶åŠŸèƒ½
        const codeBlocks = document.querySelectorAll('pre code');
        codeBlocks.forEach(code => {
          const pre = code.parentNode;
          pre.classList.add('code-block');
          
          const copyBtn = document.createElement('button');
          copyBtn.className = 'code-copy';
          copyBtn.textContent = 'å¤åˆ¶';
          copyBtn.setAttribute('data-clipboard-text', code.textContent);
          pre.appendChild(copyBtn);
        });

        // åˆ›å»ºToastå…ƒç´ 
        const toast = document.createElement('div');
        toast.className = 'toast';
        document.body.appendChild(toast);

        const clipboard = new ClipboardJS('.code-copy');
        clipboard.on('success', function(e) {
          toast.textContent = 'å¤åˆ¶æˆåŠŸ!';
          toast.classList.add('show');
          setTimeout(() => toast.classList.remove('show'), 2000);
          e.clearSelection();
        });
        clipboard.on('error', function(e) {
          toast.textContent = 'å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©åå¤åˆ¶';
          toast.classList.add('show');
          setTimeout(() => toast.classList.remove('show'), 2000);
        });

        // åˆå§‹åŒ–å›¾ç‰‡æŸ¥çœ‹å™¨
        const articleContent = document.querySelector('.article-content');
        if (articleContent) {
          try {
            // åˆ›å»ºå›¾ç‰‡å®¹å™¨
            const viewerContainer = document.createElement('div');
            viewerContainer.className = 'image-viewer-container';
            
            // å¤åˆ¶æ‰€æœ‰å›¾ç‰‡åˆ°å®¹å™¨
            const images = articleContent.querySelectorAll('img');
            images.forEach(img => {
              const clone = img.cloneNode();
              clone.src = img.src;
              viewerContainer.appendChild(clone);
            });

            // åˆå§‹åŒ–Viewerå¹¶ä¿å­˜å®ä¾‹
            const viewer = new Viewer(viewerContainer, {
              inline: false,
              button: true,
              navbar: true,
              title: false,
              toolbar: {
                zoomIn: true,
                zoomOut: true,
                oneToOne: true,
                reset: true,
                prev: true,
                play: true,
                next: true,
                rotateLeft: true,
                rotateRight: true,
                flipHorizontal: true,
                flipVertical: true,
              }
            });

            // ç‚¹å‡»åŸå›¾æ—¶è§¦å‘Viewer
            images.forEach((img, index) => {
              img.addEventListener('click', () => {
                viewer.view(index);
              });
            });
          } catch (e) {
            console.error('Viewer initialization error:', e);
          }
        }
      });
    </script>
  </body>
</html>
